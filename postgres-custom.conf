# Custom PostgreSQL configuration for development/testing

# Connection Settings
listen_addresses = '*'                # Listen on all available network interfaces
max_connections = 200                 # Increased for parallel testing
superuser_reserved_connections = 5

# Memory Settings
shared_buffers = 1GB                  # Increased from default 128MB
work_mem = 64MB                       # Per-operation memory for sorts, hash joins, etc
maintenance_work_mem = 256MB          # For operations like VACUUM
temp_buffers = 32MB                   # Per-session memory for temporary tables

# Planning & Optimization
effective_cache_size = 4GB            # Estimate of memory available for disk caching
random_page_cost = 1.1                # Lower for SSD storage

# Write-Ahead Log
wal_buffers = 16MB                    # Increase WAL buffer for better write performance
checkpoint_timeout = 15min            # Longer interval between checkpoints
max_wal_size = 2GB                    # Maximum WAL size between checkpoints

# Testing-specific settings
fsync = off                           # Dangerous in production, but speeds up tests
synchronous_commit = off              # Speeds up commits, acceptable for tests
full_page_writes = off                # Faster but riskier - fine for dev/test

# Parallel Query
max_worker_processes = 8              # Base pool of workers
max_parallel_workers_per_gather = 4   # Workers for a single query
max_parallel_workers = 8              # Maximum workers for the whole system

# Logging - helpful for debugging
log_min_duration_statement = 250ms    # Log slow queries (comment out if too verbose) 